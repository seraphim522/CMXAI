# CMXAI网站部署指南

## 📋 目录
1. [本地测试](#本地测试)
2. [准备工作](#准备工作)
3. [域名和服务器选择](#域名和服务器选择)
4. [部署方案](#部署方案)
5. [SSL证书配置](#ssl证书配置)
6. [性能优化](#性能优化)
7. [维护和更新](#维护和更新)

## 🏠 本地测试

### 方法一：使用Live Server扩展（推荐）
1. 在VS Code中安装"Live Server"扩展
2. 右键点击`CMXAI主页2.0.html`文件
3. 选择"Open with Live Server"
4. 浏览器会自动打开 `http://127.0.0.1:5500/CMXAI主页2.0.html`

### 方法二：使用Python内置服务器
```bash
# 在项目根目录打开终端
cd "d:\桌面\复旦大学航空航天系\WEB\CMXAI网页源码"

# Python 3
python -m http.server 8000

# Python 2
python -m SimpleHTTPServer 8000

# 然后在浏览器访问：http://localhost:8000
```

### 方法三：使用Node.js http-server
```bash
# 安装http-server
npm install -g http-server

# 在项目目录运行
http-server -p 8080

# 访问：http://localhost:8080
```

## 🛠 准备工作

### 1. 检查文件完整性
确保以下文件都存在：
```
CMXAI网页源码/
├── CMXAI主页2.0.html          # 主页文件
├── css/
│   └── style-enhanced.css      # 样式文件
├── js/
│   └── main-enhanced.js        # JavaScript文件
├── images/                     # 图片资源
├── pages/                      # 子页面
├── favicon.ico                 # 网站图标
└── site.webmanifest           # PWA配置
```

### 2. 创建必要的配置文件

#### `.htaccess` 文件（Apache服务器）
```apache
# 启用压缩
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>

# 设置缓存
<IfModule mod_expires.c>
    ExpiresActive on
    ExpiresByType text/css "access plus 1 year"
    ExpiresByType application/javascript "access plus 1 year"
    ExpiresByType image/png "access plus 1 year"
    ExpiresByType image/jpg "access plus 1 year"
    ExpiresByType image/jpeg "access plus 1 year"
    ExpiresByType image/gif "access plus 1 year"
    ExpiresByType image/svg+xml "access plus 1 year"
</IfModule>

# URL重写
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.html [QSA,L]
```

#### `robots.txt` 文件
```
User-agent: *
Allow: /

Sitemap: https://cmxai.fudan.edu.cn/sitemap.xml
```

## 🌐 域名和服务器选择

### 域名建议
- **主域名**：`cmxai.fudan.edu.cn`（如果能申请到.edu.cn域名）
- **备选域名**：`cmxai-fudan.com` 或 `fudan-cmxai.org`

### 服务器选项

#### 方案一：阿里云（推荐）
- **服务器**：ECS云服务器
- **配置**：2核4G，40GB SSD
- **带宽**：5Mbps
- **费用**：约300-500元/年
- **优势**：国内访问速度快，技术支持好

#### 方案二：腾讯云
- **服务器**：CVM云服务器
- **配置**：2核4G，50GB云硬盘
- **带宽**：5Mbps
- **费用**：约280-480元/年

#### 方案三：华为云
- **服务器**：ECS弹性云服务器
- **配置**：2核4G，40GB SSD
- **费用**：约320-520元/年

#### 方案四：海外选项（如需国际访问）
- **AWS**：EC2 t3.small实例
- **Digital Ocean**：Droplet 2GB/1CPU
- **Vultr**：Regular Performance 2GB

## 🚀 部署方案

### 方案一：传统FTP上传

#### 步骤：
1. **获取FTP信息**
   - FTP主机：通常是你的域名或服务器IP
   - 用户名：服务器提供商提供
   - 密码：自设或提供商提供
   - 端口：通常是21

2. **使用FTP工具上传**
   
   **FileZilla（免费推荐）**：
   ```
   1. 下载安装FileZilla客户端
   2. 连接到服务器：主机名/IP + 用户名 + 密码
   3. 将本地文件拖拽到远程服务器的web目录
   4. 通常上传到 /public_html 或 /www 目录
   ```

   **WinSCP（Windows）**：
   ```
   1. 下载安装WinSCP
   2. 新建连接，输入服务器信息
   3. 连接后上传所有网站文件
   ```

### 方案二：Git自动部署（推荐）

#### 1. 在GitHub/Gitee创建仓库
```bash
# 初始化Git仓库
git init
git add .
git commit -m "初始提交：CMXAI网站"
git branch -M main
git remote add origin https://github.com/yourusername/cmxai-website.git
git push -u origin main
```

#### 2. 服务器配置自动部署
```bash
# 在服务器上安装Git
sudo apt update
sudo apt install git nginx

# 克隆项目
cd /var/www/
sudo git clone https://github.com/yourusername/cmxai-website.git cmxai

# 设置定时更新（可选）
crontab -e
# 添加：*/10 * * * * cd /var/www/cmxai && git pull origin main
```

### 方案三：宝塔面板部署（最简单）

#### 1. 安装宝塔面板
```bash
# CentOS安装命令
yum install -y wget && wget -O install.sh http://download.bt.cn/install/install_6.0.sh && sh install.sh

# Ubuntu安装命令
wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh && sudo bash install.sh
```

#### 2. 部署步骤
1. 登录宝塔面板 `http://服务器IP:8888`
2. 安装LNMP环境（Linux + Nginx + MySQL + PHP）
3. 创建网站，绑定域名
4. 上传网站文件到对应目录
5. 配置SSL证书

### 方案四：CDN加速部署

#### 使用七牛云CDN
1. 注册七牛云账号
2. 创建对象存储空间
3. 上传网站文件
4. 配置CDN加速域名
5. 绑定自定义域名

## 🔒 SSL证书配置

### 免费SSL证书（Let's Encrypt）
```bash
# 安装Certbot
sudo apt install certbot python3-certbot-nginx

# 获取证书
sudo certbot --nginx -d cmxai.fudan.edu.cn

# 设置自动续期
sudo crontab -e
# 添加：0 12 * * * /usr/bin/certbot renew --quiet
```

### 阿里云SSL证书
1. 登录阿里云控制台
2. 进入"SSL证书"服务
3. 申请免费证书（DV SSL）
4. 域名验证
5. 下载证书并配置到服务器

## ⚡ 性能优化

### 1. 图片优化
```bash
# 安装图片压缩工具
npm install -g imagemin-cli

# 压缩图片
imagemin images/*.{jpg,png} --out-dir=images/optimized --plugin=mozjpeg --plugin=pngquant
```

### 2. 开启Gzip压缩
在Nginx配置中添加：
```nginx
server {
    # 开启gzip
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css text/xml text/javascript application/javascript application/xml+rss application/json;
    
    # 缓存设置
    location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

### 3. CDN配置
- **阿里云CDN**：访问速度快，国内优化好
- **腾讯云CDN**：价格优惠，节点覆盖广
- **CloudFlare**：免费套餐，全球节点

## 📊 监控和分析

### 1. 网站监控
- **阿里云云监控**：免费监控服务器状态
- **百度统计**：访问数据分析
- **Google Analytics**：国际访问分析

### 2. 性能监控
```javascript
// 在网站中添加性能监控代码
window.addEventListener('load', function() {
    // 页面加载时间
    const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
    console.log('页面加载时间:', loadTime + 'ms');
    
    // 发送到分析服务器
    // analytics.track('page_load_time', loadTime);
});
```

## 🔄 维护和更新

### 1. 定期备份
```bash
# 创建备份脚本
#!/bin/bash
DATE=$(date +%Y%m%d_%H%M%S)
tar -czf /backup/cmxai_backup_$DATE.tar.gz /var/www/cmxai
# 保留最近10个备份
ls -t /backup/cmxai_backup_*.tar.gz | tail -n +11 | xargs rm -f
```

### 2. 更新流程
1. 在本地测试修改
2. 提交到Git仓库
3. 在服务器上拉取更新
4. 检查网站正常运行

### 3. 安全维护
- 定期更新服务器系统
- 监控异常访问
- 备份重要数据
- 检查SSL证书有效期

## 🌟 访问地址配置

### 最终访问地址示例：
- **主站**：https://cmxai.fudan.edu.cn
- **移动版**：https://m.cmxai.fudan.edu.cn
- **后台管理**：https://admin.cmxai.fudan.edu.cn

## 📞 技术支持

### 遇到问题时的解决步骤：
1. 检查服务器状态
2. 查看错误日志
3. 测试网络连通性
4. 联系服务商技术支持

### 常见问题：
- **404错误**：检查文件路径和权限
- **502错误**：检查服务器配置
- **SSL证书问题**：重新申请或配置证书
- **加载缓慢**：优化图片和启用CDN

---

**完成部署后，您的网站将可以通过域名在全世界任何地方访问！**

如有技术问题，可联系：
- 📧 邮箱：webmaster@cmxai.fudan.edu.cn
- 📱 电话：021-65642222
- 💬 QQ群：123456789